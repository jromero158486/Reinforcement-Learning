<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Bluetooth Car Remote</title>
<style>
  body {
    text-align:center;
    font-family:Arial;
    background:#f1f1f1;
  }

  #status {
    font-size:22px;
    font-weight:bold;
    margin:20px;
  }

  #connect {
    padding:15px 30px;
    font-size:20px;
    border-radius:12px;
    background:#ffd93b;
    border:none;
    cursor:pointer;
    margin-bottom:20px;
  }

  .pad {
    width:300px;
    margin:auto;
    background:#fff;
    padding:20px;
    border-radius:30px;
    border:3px solid #ccc;
  }

  button.arrow {
    width:90px;
    height:90px;
    margin:10px;
    font-size:40px;
    border-radius:20px;
    border:none;
    background:#ffef9f;
    cursor:pointer;
    transition:0.1s;
  }

  button.arrow:active {
    background:#ffd93b;
    transform:scale(0.90);
  }

  .row {
    display:flex;
    justify-content:center;
  }
</style>
</head>
<body>

<h2>üöó Car Remote Control</h2>
<div id="status">Disconnected</div>
<button id="connect">üîµ Connect</button>

<div class="pad">
  <div class="row">
    <button class="arrow" data-cmd="U">‚¨Ü</button>
  </div>

  <div class="row">
    <button class="arrow" data-cmd="L">‚¨Ö</button>
    <button class="arrow" data-cmd="S">‚èπ</button>
    <button class="arrow" data-cmd="R">‚û°</button>
  </div>

  <div class="row">
    <button class="arrow" data-cmd="D">‚¨á</button>
  </div>
</div>

<script>
let port, writer;

// --- CONNECT TO SERIAL (HC-06) ---
document.getElementById("connect").onclick = async () => {
  try {
    port = await navigator.serial.requestPort();
    await port.open({ baudRate: 9600 });

    writer = port.writable.getWriter();

    document.getElementById("status").innerText = "Connected ‚úî";
    document.getElementById("status").style.color = "green";
  } catch (err) {
    document.getElementById("status").innerText = "Connection Failed";
    document.getElementById("status").style.color = "red";
  }
};

// --- SEND COMMAND ---
function send(cmd) {
  if (!writer) return alert("Connect first!");
  writer.write(new TextEncoder().encode(cmd));
}

// --- BUTTON EVENTS ---
document.querySelectorAll(".arrow").forEach(btn => {
  btn.onmousedown = () => send(btn.dataset.cmd);
  btn.ontouchstart = () => send(btn.dataset.cmd);

  // Stop when released
  btn.onmouseup = () => send("S");
  btn.ontouchend = () => send("S");
});
</script>

</body>
</html>
